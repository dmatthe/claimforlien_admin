# Autosuggest
In computing, incremental search, incremental find or real-time suggestions is a user interface interaction method to progressively search for and filter through text. As the user types text, one or more possible matches for the text are found and immediately presented to the user. This immediate feedback often allows the user to stop short of typing the entire word or phrase they were looking for. The user may also choose a closely related option from the presented list.
 <small>- [Wikipedia](https://en.wikipedia.org/wiki/Incremental_search)</small>

## Implementation
### Javascript
~~~js
const ui = new COTUI({
                      target:'string',                       // document.body (default)
                      initCustomElements: true      // false (default)
                    });  
const options = {
                target:'#target',
                  label:'string',
                  button:'string',
                  icon:'string',
                  type:'default',                   // default (default), api, custom
                  limit:number,                     // 7, default
                  dataApi:{
                    value:'KEYSTRING',
                    text:'ADDRESS',
                    path:'result.rows',
                    url:'string{QUERY}',
                    includeAll:true
                  };
                }

const uiAutosuggest = ui.Autosuggest(options)
~~~

#### Events
~~~js
uiAutosuggest.results((evt)=>{ console.log('Results Fired', evt) });
uiAutosuggest.submit((evt)=>{ console.log('Submit Fired', evt) });
uiAutosuggest.selected((evt)=>{ console.log('Selected Fired', evt) });
~~~

### Custom Element Definition
~~~js
new COTUI(
  target,                               // document.body (default)
  initCustomElements: true              // false (default)
);  
~~~

#### Attributes
~~~js
  label="Find Address or Intersection"
  button="Find address" 
  limit="number"                        // 7 (default)
  icon="glyphicon glyphicon-map-marker" // classname
  type="default"                        // default (default), api, custom

  data-api.attr-value="string"          // What value to return e.g. "KEYSTRING"
  data-api.attr-text="string"           // What to query against e.g. "ADDRESS"
  data-api.attr-array="string.array"    // Path to results e.g. "results.rows"
  data-api.url="string{QUERY}"          // {QUERY} is replaced byt the component

  on-search="function"                  // Available only when type="custom"
  on-selected="function"
  on-results="function"
  on-submit="function"
~~~

#### Element

##### Search against API
~~~html
<cotui-autosuggest 
    label="Find Address or Intersection (cotgeocoder)" 
    limit="5"
    icon="glyphicon glyphicon-map-marker"
    button="Lookup"
    type="api"

    data-api.attr-value="KEYSTRING" 
    data-api.attr-text="ADDRESS" 
    data-api.attr-array="result.rows"
    data-api.url="https://map.toronto.ca/cotgeocoder/rest/geocoder/suggest?f=json&addressOnly=0&retRowLimit=10&searchString={QUERY}"

    on-selected="handleSelected"
    on-results="handleResults"
    on-submit="handleSubmit"></cotui-autosuggest>
~~~

##### Search Using Custom Handler
~~~html
<cotui-autosuggest 
    label="Name"     
    icon="glyphicon glyphicon-user"
    button="Lookup"
    type="custom"

    on-search="handleSearch"
    on-selected="handleSelected"
    on-results="handleResults"
    on-submit="handleSubmit"></cotui-autosuggest>
~~~

~~~js
const handleSearch = (q) =>{
  console.log('Query:', q.text)
  let results =[]
  const strArray = q.text.split(' ') 
  for(var i = 0; i < strArray.length; i++){
    results.push({text: strArray[i], value: strArray[i]})
  }
  
  return results
}
~~~


##### Search Using Unordered List
~~~html
<cotui-autosuggest 
  limit="7"
  
  on-selected="handleSelected"
  on-results="handleResults"
  on-submit="handleSubmit"
  >
  <ul>
    <li data-value="vegetable:artichoke">artichoke</li>
    <li data-value="vegetable:aubergine">aubergine (eggplant)</li>
    <li data-value="vegetable:amrud">amrud</li>
    <li data-value="vegetable:asparagus">asparagus</li>
    <li>split peas</li>
    <li>soy beans</li>
    <li>peas</li>
    <li>mangetout or snap peas</li>
  </ul>
~~~

## Accessibility
By Using the provided COTUI & CoreJS libraries you will ensure that the accordion is accessible in your applications.

[Aria Authoring Practice 1.1.3.13](https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox)



## Templates
[SVG - coming soon](https://www.w3.org/TR/wai-aria-practices-1.1/#button)
[PSD - coming soon](https://www.w3.org/TR/wai-aria-practices-1.1/#button)
[Sketch - coming soon](https://www.w3.org/TR/wai-aria-practices-1.1/#button)
