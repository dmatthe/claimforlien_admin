<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="http://www.toronto.ca/wp-content/themes/cot/css/cot.css" type="text/css" media="all">
    <link rel="stylesheet" href="http://www.toronto.ca/cot/style.css" media="all">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
   


   
    <title>COTUI.Autosuggest.CE</title>
  </head>
    <body class="container-fluid">

      <div id="app">
        <h2>JSON.Endpoint</h2>
        <cotui-suggest
            label="Find Address or Intersection (cotgeocoder)"
            limit="10"
            icon="fas fa-map-marker-alt"
            button="Lookup"
            type="api"

            data-api.attr-value="KEYSTRING"
            data-api.attr-text="ADDRESS"
            data-api.attr-array="result.rows"
            data-api.url="https://map.toronto.ca/cotgeocoder/rest/geocoder/suggest?f=json&addressOnly=0&retRowLimit=100&searchString={QUERY}"

            on-selected="handleSelected"
            on-results="handleResults"
            on-submit="handleSubmit">
        </cotui-suggest>
        <h2>Custom Search Handler</h2>
        <cotui-autosuggest
            label="Type username"
            icon="glyphicon glyphicon-user"
            button="Lookup"
            type="custom"

            on-search="handleSearch"
            on-selected="handleSelected"
            on-results="handleResults"
            on-submit="handleSubmit"></cotui-autosuggest>

        <h2>UL List</h2>
        <cotui-autosuggest
          limit="7"

          on-selected="handleSelected"
          on-results="handleResults"
          on-submit="handleSubmit"
          >
          <ul>
            <li data-value="vegetable:artichoke">artichoke</li>
            <li data-value="vegetable:aubergine">aubergine (eggplant)</li>
            <li data-value="vegetable:amrud">amrud</li>
            <li data-value="vegetable:asparagus">asparagus</li>
            <li data-value="vegetable:legumes">legumes</li>
            <li data-value="vegetable:alfalfa">alfalfa sprouts</li>
            <li data-value="vegetable:azuki beans">azuki beans (or adzuki)</li>
            <li data-value="vegetable:alfalfa">bean sprouts</li>
            <li data-value="vegetable:bean sprouts">black beans</li>
            <li data-value="vegetable:black-eyed peas">black-eyed peas</li>
            <li data-value="vegetable:borlotti bean">borlotti bean</li>
            <li data-value="vegetable:broad beans">broad beans</li>
            <li data-value="vegetable:chickpeas, garbanzos, or ceci beans">chickpeas, garbanzos, or ceci beans</li>
            <li data-value="vegetable:green beans">green beans</li>
            <li data-value="vegetable:kidney beans">kidney beans</li>
            <li data-value="vegetable:lentils">lentils</li>
            <li data-value="vegetable:lima beans or Butter bean">lima beans or Butter bean</li>
            <li data-value="vegetable:mung beans">mung beans</li>
            <li data-value="vegetable:navy beans">navy beans</li>
            <li data-value="vegetable:pinto beans">pinto beans</li>
            <li data-value="vegetable:runner beans">runner beans</li>
            <li>split peas</li>
            <li>soy beans</li>
            <li>peas</li>
            <li>mangetout or snap peas</li>
            <li>broccoflower (a hybrid)</li>
            <li>broccoli (calabrese)</li>
            <li>brussels sprouts</li>
            <li>cabbage</li>
            <li>kohlrabi</li>
            <li>cauliflower</li>
            <li>celery</li>
            <li>endive</li>
            <li>fiddleheads</li>
            <li>frisee</li>
            <li>fennel</li>
            <li>greens</li>
            <li>beet greens (chard)</li>
            <li>bok choy</li>
            <li>chard (beet greens)</li>
            <li>collard greens</li>
            <li>kale</li>
            <li>mustard greens</li>
            <li>spinach</li>
            <li>quinoa</li>
            <li>herbs and spices</li>
            <li>anise</li>
            <li>basil</li>
            <li>caraway</li>
            <li>cilantro (also known as coriander)</li>
            <li>chamomile</li>
            <li>dill</li>
            <li>fennel</li>
            <li>lavender</li>
            <li>lemon Grass</li>
            <li>marjoram</li>
            <li>oregano</li>
            <li>parsley</li>
            <li>rosemary</li>
            <li>sage</li>
            <li>thyme</li>
            <li>lettuce</li>
            <li>arugula</li>
            <li>mushrooms (actually a fungus", not a plant)</li>
            <li>nettles</li>
            <li>New Zealand spinach</li>
            <li>okra</li>
            <li>onions</li>
            <li>Chives</li>
            <li>Garlic</li>
            <li>Leek</li>
            <li>onion</li>
            <li>shallot</li>
            <li>scallion (spring onion UK", green onion US)</li>
            <li>parsley</li>
            <li>peppers (biologically fruits", but taxed as vegetables)</li>
            <li>ell pepper</li>
            <li>hili pepper</li>
            <li>Jalape√±o</li>
            <li>Habanero</li>
            <li>Paprika</li>
            <li>Tabasco pepper</li>
            <li>Cayenne pepper</li>
            <li>radicchio</li>
            <li>rhubarb</li>
            <li>root vegetables</li>
            <li>beetroot (UK) Beet (US)</li>
            <li>mangel-wurzel: a variety of beet used mostly as cattlefeed</li>
            <li>carrot</li>
            <li>celeriac</li>
            <li>daikon</li>
            <li>ginger</li>
            <li>parsnip</li>
            <li>rutabaga</li>
            <li>turnip</li>
            <li>radish</li>
            <li>wasabi</li>
            <li>horseradish</li>
            <li>white radish</li>
            <li>salsify (Oyster Plant)</li>
            <li>skirret</li>
            <li>sweetcorn [1]</li>
            <li>topinambur</li>
            <li>squashes (biologically fruits", but taxed as vegetables)</li>
            <li>acorn squash</li>
            <li>bitter melon</li>
            <li>butternut squash</li>
            <li>banana squash</li>
            <li>courgette (UK)", Zucchini (US)</li>
            <li>cucumber (biologically fruits", but taxed as vegetables)</li>
            <li>delicata</li>
            <li>gem squash</li>
            <li>hubbard squash</li>
            <li>marrow (UK) Squash (US)</li>
            <li>patty pans</li>
            <li>pumpkin</li>
            <li>spaghetti squash</li>
            <li>tat soi</li>
            <li>tomato (biologically a fruit", but taxed as a vegetable)</li>
            <li>tubers</li>
            <li>jicama</li>
            <li>jerusalem artichoke</li>
            <li>potato</li>
            <li>quandong</li>
            <li>sunchokes</li>
            <li>sweet potato</li>
            <li>taro</li>
            <li>yam</li>
            <li>water chestnut</li>
            <li>watercress</li>
          </ul>
        </cotui-autosuggest>

        <h2>JS.App</h2>
        <div id="js-app"></div>
        <div id="js-app-json"></div>
    </div>
    </div>
    
    
    <script>
      var handleSearch = function(q){
        console.log('Query:', q.text)
        let results =[]
        var strArray = q.text.split(' ')
        for(var i = 0; i < strArray.length; i++){
          results.push({text: strArray[i], value: strArray[i]})
        }

        return results
      }

      var handleSelected = function(evt){
        console.log('JS:Selected', evt)
      }

      var handleResults = function(evt){
        console.log('JS:Result', evt)
      }

      var  handleSubmit = function(evt){
        console.log('JS:Submit', evt)
      }



      document.onreadystatechange = function () {
        if (document.readyState == "interactive") {
          var ui = new COTUI();

          var autosuggestVUE = ui.SuggestCE({target:'#app',initCustomElements:true})

          var autosuggest = ui.SuggestCE({
            target:'#js-app',
            label:'Find Address or Intersection',
            button:'Lookup',
            icon:'glyphicon glyphicon-map-marker',
            type:'api',
            limit:10,
            dataApi:{
              value:'KEYSTRING',
              text:'ADDRESS',
              path:'result.rows',
              url:'https://map.toronto.ca/cotgeocoder/rest/geocoder/suggest?f=json&addressOnly=0&retRowLimit=100&searchString={QUERY}',
              includeAll:true
            }
          })

          autosuggest.results( function(evt){ console.log('Got Results', evt) });
          autosuggest.selected( function(evt){ console.log('Selected Fired', evt) });
          autosuggest.submit( function(evt){ console.log('Submit Fired',evt) });


          var autosuggestJSON = ui.SuggestCE({
            target:'#js-app',
            label:'Find Address or Intersection',
            button:'Lookup',
            icon:'glyphicon glyphicon-map-marker',
            type:'json',
            limit:10,
            dataApi:{
              value:'title',
              text:'title,author,author.firstName,author.lastName',
              path:'result.rows',
              url: [{ 
                  title: "Old Man's War", 
                  author: { firstName: "John", lastName: "Scalzi" } 
                },{
                  title: 'Right Ho Jeeves',
                  author: 'P.D. Mans',
                  tags: ['fiction', 'war']
              }],
              includeAll:true
            }
          })

          autosuggestJSON.results( function(evt){ console.log('Got Results', evt) });
          autosuggestJSON.selected( function(evt){ console.log('Selected Fired', evt) });
          autosuggestJSON.submit( function(evt){ console.log('Submit Fired',evt) });


          console.log( autosuggest )
          console.log( autosuggestJSON )
        }
      }
    </script>
  </body>
</html>
