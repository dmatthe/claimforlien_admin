function changeFontSize(newVal, reset) {
  if (reset) {
    deleteCookie('fontsize');
  } else {
    setCookie('fontsize', newVal);
  }
  $('body').css('font-size', newVal);
  $('#text-increase')[0].disabled = newVal === '1.5em';
  $('#text-decrease')[0].disabled = newVal === '.7em';

  setConsistentHeight(".tabNavigation", ".nav-tabs a");
  setConsistentHeight(".carousel", ".item");
}

function increaseFontSize() {
  var val = getCookie('fontsize') || '1.1em';
  changeFontSize(Math.min(parseFloat(val) + 0.1, 1.5) + 'em');
}

function decreaseFontSize() {
  var val = getCookie('fontsize') || '.9em';
  changeFontSize(Math.max(parseFloat(val) - 0.1, 0.7) + 'em');
}

function applyFontSize() {
  var val = getCookie('fontsize');
  if (val) {
    changeFontSize(val);
  }
}

function setCookie(key, value) {
  var expires = new Date();
  expires.setTime(expires.getTime() + (24 * 60 * 60 * 1000));
  document.cookie = key + '=' + value + ';path=/;expires=' + expires.toUTCString();
}

function getCookie(key) {
  var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
  return keyValue ? keyValue[2] : null;
}

function deleteCookie(key) {
  document.cookie = key + '=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}

function setConsistentHeight(strParentSelector, strChildSelector) {
  var itemsParent = $(strParentSelector);
  var heights = [];
  var tallest;

  itemsParent.each(
    function () {
      var items = $(this).find(strChildSelector);
      if (items.length) {
        items.each(function () {
          $(this).css('height', 'auto');
        });
        items.each(function () {
          heights.push($(this).height());
        });
        tallest = Math.max.apply(null, heights) + 10;
        items.each(function () {
          $(this).css('height', tallest + 'px');
        });
      }
    })
}
