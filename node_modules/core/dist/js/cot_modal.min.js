"use strict";$(function(){(window.cot_app||window.CotApp).showModal=function(o){function a(o){if("click"===o.type)return!0;if("keyup"!==o.type)return!1;var a=o.charCode||o.keyCode;return 32===a||13===a||void 0}var t="modal_"+Math.random().toString().split(".")[1],e=function(o,a){if(a&&a.hasOwnProperty("bootstrapType")){-1==["primary","success","info","warning","danger"].indexOf(a.bootstrapType)&&(a.bootstrapType="default")}switch(o){case"cancel":return'<button class="btn btn-'+a.bootstrapType+'" type="button" data-dismiss="modal">'+a.label+"</button>";case"confirm":return'<button class="btn btn-'+a.bootstrapType+" js-confirm_"+t+'" type="button">'+a.label+"</button>";default:return'<button class="btn btn-default" type="button" data-dismiss="modal">Close</button>'}},i=$.extend({preset:!1,title:"",body:"",bootstrapType:"default",footerButtonsHtml:e(),modalSize:"",originatingElement:null,className:"",onShow:o.onShow||function(){},onShown:o.onShown||function(){},onHide:o.onHide||function(){},onHidden:o.onHidden||function(){},buttons:{cancel:{label:'<i class="glyphicon glyphicon-remove"></i> Cancel',bootstrapType:"default"},confirm:{label:'<i class="glyphicon glyphicon-ok"></i> Confirm',bootstrapType:"primary"}},callback:function(){}},o);if(null===i.originatingElement)return console.error("originatingElement is required"),!1;var d="";switch(i.preset){case"alert":d='<div class="modal fade alert-'+i.bootstrapType+" "+i.className+'" id="'+t+'" tabindex="-1" role="dialog" aria-label="Alert" aria-hidden="true" aria-modal="true" aria-describedby="'+t+'_body">    <div class="modal-dialog '+i.modalSize+'">      <div class="modal-content">        <div id="'+t+'_body" class="modal-body" >'+i.body+'</div>        <div class="modal-footer">'+e()+"        </div>      </div>    </div>  </div>";break;case"confirm":d='<div class="modal fade '+i.className+'" id="'+t+'" tabindex="-1" role="dialog" aria-labelledby="'+t+'_title" aria-hidden="true" aria-modal="true">    <div class="modal-dialog '+i.modalSize+'">      <div class="modal-content">        <div class="modal-header">          <button type="button" aria-label="Close" class="close" type="button" data-dismiss="modal">            <span aria-hidden="true">&times;</span>          </button>          <div role="heading" aria-level="2" id="'+t+'_title" class="modal-title">'+i.title+'</div>        </div>        <div id="'+t+'_body" class="modal-body">'+i.body+'</div>        <div class="modal-footer">'+e("cancel",{bootstrapType:i.buttons.cancel.bootstrapType,label:i.buttons.cancel.label})+" "+e("confirm",{bootstrapType:i.buttons.confirm.bootstrapType,label:i.buttons.confirm.label}),"function"==typeof i.callback&&$("body").delegate(".js-confirm_"+t,"click keyup",function(o){!0===a(o)&&(i.callback(),$("#"+t).modal("hide"))});break;default:d='<div class="modal fade '+i.className+'" id="'+t+'" tabindex="-1" role="dialog" aria-labelledby="'+t+'_title" aria-hidden="true" aria-modal="true">    <div class="modal-dialog '+i.modalSize+'">      <div class="modal-content">        <div class="modal-header">          <button type="button" aria-label="Close" class="close" type="button" data-dismiss="modal">            <span aria-hidden="true">&times;</span>          </button>          <div role="heading" aria-level="2" id="'+t+'_title" class="modal-title">'+i.title+'</div>        </div>        <div id="'+t+'_body" class="modal-body">'+i.body+'</div>        <div class="modal-footer">'+i.footerButtonsHtml+"        </div>      </div>    </div>  </div>"}$("body").append(d);var n=$("#"+t),l=n.find(".modal-header button").first(),s=n.find(".modal-footer button").last();return n.modal({show:!1}).on("show.bs.modal",function(){i.onShow()}).on("shown.bs.modal",function(){(0!=l.length?l:s).focus(),i.onShown()}).on("hide.bs.modal",function(){i.onHide()}).on("hidden.bs.modal",function(){i.onHidden(),i.originatingElement.focus(),n.remove()}).modal("show").attr("aria-hidden",!1),l.on("keydown",function(o){if(9===(o.which||o.keyCode)&&o.shiftKey)return s.focus(),!1}),s.on("keydown",function(o){if(9===(o.which||o.keyCode)&&!o.shiftKey)return l.focus(),!1}),n}});